# 第 17.9 节 AList

需要编译安装。

- 功能请求：做成 Port。


```sh
# pkg install -y node wget curl git go122 gcc bash gawk gsed
# ln -s /usr/local/bin/go122 /usr/local/bin/go
# git clone  https://github.com/alist-org/alist
# cd alist/public && wget https://github.com/alist-org/alist-web/releases/latest/download/dist.tar.gz && tar xzf # # # dist.tar.gz && rm dist.tar.gz
# cd ..
```

`ee 1.sh`，写入：

```bash
appName="alist"
builtAt="$(date +'%F %T %z')"
goVersion=$(go version | sed 's/go version //')
gitAuthor=$(git show -s --format='format:%aN <%ae>' HEAD)
gitCommit=$(git log --pretty=format:"%h" -1)
version=$(git describe --long --tags --dirty --always)
webVersion=$(wget -qO- -t1 -T2 "https://api.github.com/repos/alist-org/alist-web/releases/latest" | grep "tag_name" | head -n 1 | awk -F ":" '{print $2}' | sed 's/\"//g;s/,//g;s/ //g')
ldflags="\
-w -s \
-X 'github.com/alist-org/alist/v3/internal/conf.BuiltAt=$builtAt' \
-X 'github.com/alist-org/alist/v3/internal/conf.GoVersion=$goVersion' \
-X 'github.com/alist-org/alist/v3/internal/conf.GitAuthor=$gitAuthor' \
-X 'github.com/alist-org/alist/v3/internal/conf.GitCommit=$gitCommit' \
-X 'github.com/alist-org/alist/v3/internal/conf.Version=$version' \
-X 'github.com/alist-org/alist/v3/internal/conf.WebVersion=$webVersion' \
"
go build -ldflags="$ldflags" .
```

进行编译：

```bash
bash 1.sh
```

编译后的文件在 `alist` 下。`与 1.sh` 位于统一路径下。

配置：

```sh
./alist admin set 1 #设置 admin 密码为 1
./alist serve #启动
```


## 参考文献

- [ansoncloud8/am-alist-freebsd](https://github.com/ansoncloud8/am-alist-freebsd/blob/main/.github/workflows/build.yml)，直接使用会报错版本不对
- [从源码运行](https://alist.nn.ci/zh/guide/install/source.html)，官方文档