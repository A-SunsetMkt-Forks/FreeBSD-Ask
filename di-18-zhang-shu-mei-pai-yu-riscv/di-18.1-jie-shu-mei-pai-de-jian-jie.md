# 第 18.1 节 树莓派简介与配件选用

## 树莓派是什么？

我们常见的 Android 安卓手机、电视机顶盒处理器均基于 ARM 芯片。

树莓派就是一块基于 ARM 芯片的开发板，即一块接口丰富（HDMI、I²C、USB 2.0/3.0、I²S、CSI、GPIO、串口、RTC、PWM 风扇、DSI、PCIe（须转接）、POE 模块等）的电路板，相当于同期的千元红米手机（高通款），手机能做的事情，树莓派都能做；手机做不了的事，树莓派可能也能做。一般用于嵌入式开发，如机器人，路由器和监控等等。当然，这并非树莓派的初衷，树莓派是英国树莓派基金会的计算机教育产物。


>据称，树莓派最初的目标是为了拯救面临废系的剑桥大学计算机科学与技术系。
>
>经分析论证，教学主管认为主要原因是现在的小孩子没有便宜且开放的电脑可玩。
>
>~~“为了守护我们最爱的院系——我们所能做的，就是开发一块每个人都买得起的电路板！！”~~
>
>尽管《LoveLive!》以失败告终，但树莓派取得了巨大成功！


### 常见疑问解答

- 树莓派 4 以前的型号不如同期千元机，即使是树莓派 5 也仅相当于同代千元机。为什么不直接买二手的高端机？

答：手机确实配置高于树莓派，但是没有可扩展性（典型功能 GPIO）。

- 要可扩展性，为什么不直接买 X86 小主机？

答：首先，受限于散热（功耗墙）、电源供应，与树莓派物理尺寸（信用卡大小）相同的 x86 开发板（如 Raxda x4），其性能并不比树莓派高出多少，发热倒是上去了。其次，讨论比树莓派大的开发板亦没有意义。那不是一个类型的东西。

- 为什么不买基于瑞芯微（Rockchip）的 RK 3588/3528/35xx ？

答：所有瑞芯微的配套支持均十分欠缺，几乎只保证你能开机。**他可以标他支持 8K，但是有没有驱动就是你的问题了。** **他们并非基金会或设计用于教育目的。** 他们都是标准的商品，故相关配套产品应由其开发板提供商提供，**用户没有义务为其进行任何移植**（除非是工业开发，如果你付费，他们会提供支持）。拿来玩的用户需要的是开箱即用的产品，即使是开发板亦如此。如果你提供不了任何最基本的技术支持，或者需要用户自行维护 Linux 主线，那么我建议不要做成商业产品。如果需要用户来做这些本应由瑞芯微（或开发板制造商）去做的事，那么我建议瑞芯微开发板制造商应为其付费。**换言之，这压根就不是同类产品。瑞芯微更适合专业的从业者使用。**

>在某些人的思想中，这并非瑞芯微的问题，是用户的计算机技术不行，水平太低，也不想查手册花时间去学，动手去移植。瑞芯微已经很便宜了，没有义务提供这些。
>
>“整个行业都这样，反而树莓派才是异类。是你玩的开发板太少啦！”
>
>这些人已全然忘记 Ubuntu 这个来自非洲大地的词语本意。
>
>那么，我再说一遍：
>
>>你提供的是商业产品。故提供驱动程序、在生命周期内，集成到最新主线 LTS Linux 内核、长期维护的在线/离线文档、除开发板外的周边产品（外壳、电源、各种线缆和转接器、扩展板、散热器、天线等）、是你应尽的、且是最基本的义务。
>>
>>**不要试图将你的任何责任转嫁给用户，即使某些用户自己也拎不清。**
>>
>>**如果你提供不了任何最基本的技术支持，或者需要用户自行维护 Linux 主线，那么我建议不要做成商业零售产品。**


- 只有瑞芯微和博通可选？

答：还有更为节能的全志（Allwinner）处理器。

## 存储设备的随机读写重要性

**有必要先测试 U 盘/存储卡的 4K 读写速度**

测试方法见其他章节。

自树莓派 3B+ 以降，无需任何改动，系统即可从 U 盘启动：经测试，FreeBSD 12/13/14 均支持，但是速度非常慢——一方面树莓派 3B+ 使用 USB2.0 极大的限制的总线速度（本身也不是最高速度的 SD 卡接口），另一方面是某些 U 盘的 4K 随机实在是太差了（测试用的是东芝（TOSHIBA）U364；最离谱的是金士顿 DT100G3，4K 随机竟然是 `0`，卡到爆炸）。

树莓派的 SD 卡接口限制了存储卡的速率，并不会太高，因此使用标称 100MB+ 的存储卡毫无体验，且对于树莓派来说，随机读写速率才是最重要的。

测试标准必须至少达到存储卡的 [A2 级别（读 4000 IOPS、写 2000 IOPS）](https://www.kingston.com/cn/blog/personal-storage/microsd-sd-memory-card-naming-conventions)。

——附 IOPS-MB 在线转换器：[IOPS, MB/s, GB/day Converter](https://wintelguy.com/iops-mbs-gbday-calc.pl)


## 参考文献

- [Raspberry Pi 树莓派中文文档](https://rpicn.bsdcn.org)

